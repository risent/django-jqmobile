{% extends "mobileadmin/mobile_jquery/base.html" %}
{% load i18n mobile_admin_modify mobile_admin_media jqmobile_tags %}

{% block extrahead %}{{ block.super }}
<script type="text/javascript" src="../../../jsi18n/"></script>
<script type="text/javascript" src="{% mobileadmin_media_prefix %}js/urlify.js"></script>
{% endblock %}

{% block navbar %}
	{% get_breadcrumb request.path %}
{% endblock %}

{% block app.title %}{% trans "Admin" %} / {{ opts.verbose_name_plural|capfirst|escape }} / {{ original|escape|truncatewords:"3" }}{% endblock %}

{% block breadcrumbs %}<a href="../" class="inactive float-left">{{ opts.verbose_name_plural|capfirst|escape }}</a>

{% if change %}
{# view on site #}
{% if has_absolute_url %}<a href="../../../r/{{ content_type_id }}/{{ object_id }}/" class="inactive float-right" target="_blank">{% trans "Go" %}</a>{% endif%}
{# history #}
<a href="history/" class="inactive float-right">{% trans "History" %}</a>
{% endif%}

{% if add %}
<span class="float-right active">{% trans "Add" %}</span>
{% endif %}
{% endblock %}

{% block content %}
<form target="_self" class="panel" selected="true" title="{{ opts.object_name|capfirst }}" {% if has_file_field %}enctype="multipart/form-data" {% endif %}action="{{ form_url }}" method="post" id="{{ opts.module_name }}_form">{% csrf_token %}{% block form_top %}{% endblock %}
{% if not add %}
    <h1><span id="object_name">{{ opts.object_name|escape }}</span>: <span id="original">{{ original|escape }}</span></h1>
{% endif %}

{% if errors %}
<h1 class="error">
{% blocktrans count errors.items|length as counter %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
</h1>
{% endif %}

{% for fieldset in adminform %} 
  {% include "mobileadmin/mobile_jquery/includes/fieldset.html" %}
{% endfor %}
 
{% block after_field_sets %}{% endblock %} 
 
{% for inline_admin_formset in inline_admin_formsets %} 
    {% mobile_inline_admin_formset inline_admin_formset user_agent %}
{% endfor %}
 
{% block after_related_objects %}{% endblock %} 
<!--
<div class="submit-row" selected="true">
<ul data-role="listview" data-inset="true" data-theme="a" data-dividertheme="a">
    <li><a href="javascript:;" onclick="document.forms[0].submit()" class="inactive float-right submit" >{% trans 'Save' %}</a></li>
    {% if has_delete_permission %}{% if change or show_delete %}<li><a href="delete/" class="inactive float-left delete">{% trans "Delete" %}</a></li>{% endif %}{% endif %}
</ul>
</div>--><!-- ajout dasn le footer de ces otions lÃ , donc plus besoin de les afficher ici-->

{% if add %} 
   <script type="text/javascript">document.getElementById("{{ adminform.first_field.auto_id }}").focus();</script> 
{% endif %} 

{# JavaScript for prepopulated fields #}
{% prepopulated_fields_js %}
</form>
{% endblock %}

{% block page.footer %}
<a id="save-object" data-theme="a" data-iconpos="left" data-icon="delete" onclick="document.forms[0].submit()">{% trans "Save" %}</a>
{% if has_delete_permission %}{% if change or show_delete %}<a data-theme="a" data-iconpos="left" data-icon="delete" href="delete/">{% trans "Delete" %}</a>{% endif %}{% endif %}
<script>
$(function(){
    $('#save-object').bind('click', function(){
        console.log($('form:first'));
        $('form:first').submit();
        return false;
    });

})
</script>
{% endblock %}

{% extends "mobileadmin/mobile_jquery/base.html" %}
{% load i18n mobile_admin_modify mobile_admin_media %}

{% block extrahead %}{{ block.super }}
<script type="text/javascript" src="../../../jsi18n/"></script>
<script type="text/javascript" src="{% mobileadmin_media_prefix %}js/urlify.js"></script>
{% endblock %}


{% block breadcrumbs %}<a href="../" class="inactive float-left">{{ opts.verbose_name_plural|capfirst|escape }}</a>

{% if change %}
{% if has_absolute_url %}<a href="../../../r/{{ content_type_id }}/{{ object_id }}/" class="inactive float-right" target="_blank">{% trans "Go" %}</a>{% endif%}
<a href="history/" class="inactive float-right">{% trans "History" %}</a>
{% endif%}

{% if add %}
<span class="float-right active">{% trans "Add" %}</span>
{% endif %}
{% endblock %}

{% block content %}
<form target="_self" class="panel" selected="true" title="{{ opts.object_name|capfirst }}" {% if has_file_field %}enctype="multipart/form-data" {% endif %}action="{{ form_url }}" method="post" id="{{ opts.module_name }}_form">
    {% csrf_token %}
    {% block form_top %}{% endblock %}

    {% if add %}
    <h1>{% trans "Add" %} {% trans opts.object_name %}</h1>
    {% else %}
    <h1><span id="object_name">{{ opts.object_name|escape }}</span>: <span id="original">{{ original|escape }}</span></h1>
    {% endif %}

    {% if errors %}
    <p class="ui-bar-e error">
    {% blocktrans count errors.items|length as counter %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
    </p>
    {% endif %}

    {% for fieldset in adminform %} 
      {% include "mobileadmin/mobile_jquery/includes/fieldset.html" %}
    {% endfor %}
 
    {% block after_field_sets %}{% endblock %} 
 
    {% for inline_admin_formset in inline_admin_formsets %} 
        {% mobile_inline_admin_formset inline_admin_formset user_agent %}
    {% endfor %}
 
    {% block after_related_objects %}{% endblock %} 

{% comment %}
<div class="submit-row" selected="true">
    <a href="javascript:;" onclick="document.forms[0].submit()" class="inactive float-right submit">{% trans 'Save' %}</a>
    {% if has_delete_permission %}{% if change or show_delete %}<a href="delete/" class="inactive float-left delete">{% trans "Delete" %}</a>{% endif %}{% endif %}
</div>
{% endcomment %}
</form>
{% endblock %}

{% block page.footer %}
<a id="save-object" data-theme="a" data-iconpos="left" data-icon="check" href="{% url mobileadmin:logout %}">{% trans "Save" %}</a>
<a data-theme="a" data-iconpos="left" data-icon="delete" href="{% url mobileadmin:logout %}">{% trans "Delete" %}</a>
{# JavaScript for prepopulated fields #}
{% prepopulated_fields_js %}
<script>
$(function(){
    $('#save-object').bind('click', function(){
        $('form:first').submit()
        return false
    });
    {% if add %}$("#{{ adminform.first_field.auto_id }}").focus(){% endif %} 
})
</script>
{% endblock %}

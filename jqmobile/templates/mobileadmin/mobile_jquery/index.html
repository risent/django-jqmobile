{% extends "mobileadmin/mobile_jquery/base.html" %}
{% load i18n mobile_admin_modify %}

{% block content %}
{% if app_list %}
    <ul data-role="listview" data-inset="true" data-theme="a" data-dividertheme="a">
        <li>{% trans 'Django administration' %}</li>
        {% for app in app_list %}
        <li><a href="{{ app.app_url }}" id="{{ app.name|slugify }}_app">{% blocktrans with app.name as name %}{{ name }}{% endblocktrans %}</a></li>
        {% endfor %}
    </ul>
{% else %}
    <div class="panel" selected="true">
        <h1 class="error">{% trans "You don't have permission to edit anything." %}</p>
    </div>
{% endif %}
{% endblock %}


{% block page.footer %}
    {% if user.is_authenticated and user.is_staff %}
    <a data-theme="a" data-iconpos="left" data-icon="back" href="{% url admin:index %}">{% trans "Desktop" %}</a>
    <a data-theme="a" data-iconpos="left" data-icon="gear" href="{% url mobileadmin:password_change %}">{% trans "Password" %}</a>
    <a data-theme="a" data-iconpos="left" data-icon="grid" href="#ma-actions">{% trans "Actions" %}</a>
    <a data-theme="a" data-iconpos="left" data-icon="delete" href="{% url mobileadmin:logout %}">{% trans "Logout" %}</a>
    {% endif %}
{% endblock %}



{% block page.secondarypages %}
<div id="ma-actions" data-role="page" data-theme="a">
    <div data-theme="a" data-role="header" class="ui-bar-a ui-header" role="banner">
        <h1 tabindex="0" role="heading" aria-level="1" data-theme="a">{% trans 'Django administration' %}</h1>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-inset="true" data-theme="a" data-dividertheme="a">
            <li>{% trans 'My Actions' %}</li>
            {% load log %}
            {% get_admin_log 10 as admin_log for_user user %}
            {% if not admin_log %}
            <li>{% trans 'None available' %}</li>
            {% else %}
            {% for entry in admin_log %}
            <li {% if entry.is_addition %} data-icon="plus"{% endif %}{% if entry.is_change %} data-icon="check"{% endif %}{% if entry.is_deletion %} data-icon="delete"{% endif %} data-theme="a">
                {% if not entry.is_deletion %}<a href="{{ entry.get_admin_url }}">{% endif %}
                {% filter capfirst %}{% trans entry.content_type.name %}{% endfilter %}: <span id="entry_{{ entry.pk }}">{{ entry.object_repr|escape }}</span>
                {% if not entry.is_deletion %}</a>{% endif %}
                <span class="ui-li-count ui-btn-corner-all">{{ entry.action_time }}</span>
            </li>
            {% endfor %}
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}
